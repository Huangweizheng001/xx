!function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=5)}({132:function(e,t){},5:function(e,t,a){"use strict";function n(e){return/\S+/.test(e)}function r(e,t,a){this.questionid=e,this.source=t,this.answer=a}a(132),function(){var e=$(this).getUrlParam("paperId"),t=$(window).storager({key:"ycToken"}).readStorage();new Vue({el:"#tasktemplate",data:{questionList:[],taskName:"",isPicture:"",imgArr:[]},filters:{addRootFile:function(e){return SERVERROOTFILE+e},getStyle:function(e){switch(e){case 1:return"single-choice";case 2:return"multiple-choice";case 3:return"judge";case 4:return"question-answer";case 5:return"completion"}},tostring:function(e){switch(e){case 1:return"A";case 2:return"B";case 3:return"C";case 4:return"D"}},toChinese:function(e){switch(e){case 1:return"一";case 2:return"二";case 3:return"三";case 4:return"四";case 5:return"五";case 6:return"六";case 7:return"七"}}},mounted:function(){var e=this;this.$nextTick(function(){e.getQuestionList(),e.bindChoice()})},methods:{getQuestionList:function(){var t=this,a=layer.load(1,{shade:[.1,"#fff"]});this.$http.post(SERVERROOTDATA+"api/student/site/Paper.ashx?action=GetPaper",{paperId:e},{emulateJSON:!0}).then(function(e){layer.close(a),200==e.body.code&&(t.questionList=e.body.rows.typeQuestions,t.taskName=e.body.rows.paperTitle,t.imgArr=e.body.rows.pictureNameArray,t.isPicture=e.body.rows.isPicture)}).then(function(){var e=$(".feanswer-card").height();$(".fetaskTemplate").css("marginBottom",e);var t=$(".fetaskTemplate").width();$(".feanswer-card").css("width",t),setTimeout(function(){$(window.parent.document).find("#jStudentIframe").css("height",$(".fetaskTemplate").height()+e+100+"px")},300)}).then(function(){$(".fetaskTemplate").on("click","img",function(){showPhoto($(this))})})},bindChoice:function(){$(".fetaskTemplate").on("click",".single-choice .febox .fe-items .i-select",function(){$(this).siblings().removeClass("active"),$(this).addClass("active");var e=$(this).find("b").html();$(this).parent().parent().find("input.studentAnswer").val(e);var t=$(this).parent().parent().data("id"),a=$(this).parent().parent().data("source");n(e)?$(".w"+t+"-"+a).addClass("active"):$(".w"+t+"-"+a).removeClass("active")}),$(".fetaskTemplate").on("click",".multiple-choice .febox .fe-items .i-select",function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active");for(var e=$(this).parent().find(".active"),t="",a=0;a<e.length;a++)t+=$(e[a]).find("b").html(),a<e.length-1&&(t+="、");$(this).parent().parent().find("input.studentAnswer").val(t);var r=$(this).parent().parent().data("id"),s=$(this).parent().parent().data("source");n(t)?$(".w"+r+"-"+s).addClass("active"):$(".w"+r+"-"+s).removeClass("active")}),$(".fetaskTemplate").on("click",".judge .febox .fe-items .i-select",function(){$(this).siblings().removeClass("active"),$(this).addClass("active");var e=$(this).find("b").html();$(this).parent().parent().find("input.studentAnswer").val(e);var t=$(this).parent().parent().data("id"),a=$(this).parent().parent().data("source");n(e)?$(".w"+t+"-"+a).addClass("active"):$(".w"+t+"-"+a).removeClass("active")}),$(".fetaskTemplate").on("keyup",".question-answer .febox .fe-items textarea",function(){var e=$(this).val();$(this).parent().parent().parent().find("input.studentAnswer").val(e);var t=$(this).parent().parent().parent().data("id"),a=$(this).parent().parent().parent().data("source");n(e)?$(".w"+t+"-"+a).addClass("active"):$(".w"+t+"-"+a).removeClass("active")}),$(".fetaskTemplate").on("keyup",".completion .febox .fe-stems input",function(){for(var e=$(this).parent().parent().find("input"),t="",a=0,r=0;r<e.length;r++)t+=$(e[r]).val(),r<e.length-1&&(t+="_"),n($(e[r]).val())||a++;$(this).parent().parent().parent().find("input.studentAnswer").val(t);var s=$(this).parent().parent().parent().data("id"),i=$(this).parent().parent().parent().data("source");a>0?$(".w"+s+"-"+i).removeClass("active"):$(".w"+s+"-"+i).addClass("active")}),$(".feanswer-card").on("click","span",function(){var e=$(this).data("id"),t=$(this).data("source"),a=$(".q"+e+"-"+t).offset().top-200;parent.window.rolling(a)}),$(".feanswer-card").on("click",".feoperation button",function(){for(var a=$(".feanswer-card span"),n=!0,s=0;s<a.length;s++)if(!$(a[s]).hasClass("active")){n=!1;break}if(n){var i=$(".febox .studentAnswer"),o=[];for(s=0;s<i.length;s++){var c=$(i[s]).val(),u=$(i[s]).parent().data("id"),l=$(i[s]).parent().data("source");o.push(new r(u,l,c))}o=JSON.stringify(o),parent.layer.confirm("确定提交？",{btn:["提交","取消"]},function(){var a=layer.load(1,{shade:[.1,"#fff"]});$.ajax({url:SERVERROOTDATA+"api/student/site/Paper.ashx?action=SubmitPaper",type:"POST",data:{ycToken:t,paperId:e,questions:o},success:function(t){var n=JSON.parse(t);200==n.code?(parent.layer.closeAll(),window.location.href="taskresultsummary.html?paperId="+e):(layer.close(a),layer.msg(n.message))}})},function(){})}else{for(i=$(".febox .studentAnswer"),o=[],s=0;s<i.length;s++)c=$(i[s]).val(),u=$(i[s]).parent().data("id"),l=$(i[s]).parent().data("source"),o.push(new r(u,l,c));o=JSON.stringify(o),parent.layer.confirm("你还有题未答！",{btn:["继续答题","提交"]},function(){parent.layer.closeAll()},function(){var a=layer.load(1,{shade:[.1,"#fff"]});$.ajax({url:SERVERROOTDATA+"api/student/site/Paper.ashx?action=SubmitPaper",type:"POST",data:{ycToken:t,paperId:e,questions:o},success:function(t){var n=JSON.parse(t);200==n.code?(parent.layer.closeAll(),window.location.href="taskresultsummary.html?paperId="+e):(layer.close(a),layer.msg(n.message))}})})}}),$(parent.window).scroll(function(){$(parent.window).scrollTop()>=$(".fetaskTemplate").height()-$(parent.window).height()||$(parent.window).scrollTop()>=$(parent.window).height()?$(".feanswer-card").fadeIn(300):$(".feanswer-card").fadeOut(300)})}}})}()}});