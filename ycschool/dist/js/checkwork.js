!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}({12:function(e,t,n){"use strict";n(92),checkInIframe()||(window.location.href="./studentcenter.html");new Vue({el:"#jcheckWorkApp",data:{namingList:[],leaveList:[],namingFlag:!0,leaveFlag:!1,current:1,allpage:0,showItem:3,currentIndex:1,currentLeave:1,allpageLeave:0,showItemLeave:3,leaveApplyFlag:!1,beginLeaveTime:"",endLeaveTime:"",reason:""},filters:{addRootFile:function(e){return SERVERROOTFILE+e}},computed:{pages:function(){var e=[];if(this.current<this.showItem)for(var t=Math.min(this.showItem,this.allpage);t;)e.unshift(t--);else{var n=this.current-Math.floor(this.showItem/2);for(t=this.showItem,n>this.allpage-this.showItem&&(n=this.allpage-this.showItem+1);t--;)e.push(n++)}return e},pageLeave:function(){var e=[];if(this.currentLeave<this.showItemLeave)for(var t=Math.min(this.showItemLeave,this.allpageLeave);t;)e.unshift(t--);else{var n=this.currentLeave-Math.floor(this.showItemLeave/2);for(t=this.showItemLeave,n>this.allpageLeave-this.showItemLeave&&(n=this.allpageLeave-this.showItemLeave+1);t--;)e.push(n++)}return e},reasonLen:function(){return this.reason.length}},mounted:function(){this.$nextTick(function(){this.beginLeaveTime=$.getCurrentTime("",4),this.endLeaveTime=$.getCurrentTime("",4),this.showData()})},methods:{showData:function(){1==this.currentIndex?this.showNaming():2==this.currentIndex&&this.showLeave()},showNaming:function(){var e=this;this.$http.post(SERVERROOTDATA+"api/student/app/Student.ashx?action=getStudentAttendance",{pageSize:e.showItem,pageIndex:e.current},{emulateJSON:!0}).then(function(t){200==t.body.code&&(e.namingList=t.body.rows,e.allpage=t.body.totalPageCount)})},showLeave:function(){var e=this;this.$http.post(SERVERROOTDATA+"api/student/site/Student.ashx?action=getStudentLeave",{pageSize:e.showItemLeave,pageIndex:e.currentLeave},{emulateJSON:!0}).then(function(t){200==t.body.code&&(e.leaveList=t.body.rows,e.allpageLeave=t.body.totalPageCount)})},changeShow:function(e){if(1==e){if(this.NamingFlag)return!1;this.namingFlag=!0,this.leaveFlag=!1,this.currentIndex=1,this.showData(),this.setParentIframe()}else 2==e&&(this.namingFlag=!1,this.leaveFlag=!0,this.currentIndex=2,this.showData(),this.setParentIframe())},setParentIframe:function(){setTimeout(function(){window.parent.window.setIframeHeight()},200)},goto:function(e){if(e!=this.current){if(e>this.allpage)return this.current=this.current-2,layer.msg("Sorry ╮(╯_╰)╭ 没有下一页喽！"),!1;this.current=e,this.showData()}},gotoLeave:function(e){if(e!=this.currentLeave){if(e>this.allpageLeave)return this.currentLeave=this.currentLeave-2,layer.msg("Sorry ╮(╯_╰)╭ 没有下一页喽！"),!1;this.currentLeave=e,this.showData()}},initTime:function(){var e=this;setTimeout(function(){$("#begin_date").ECalendar({type:"time",stamp:!1,offset:[0,2],skin:3,step:10,callback:function(t,n){e.beginLeaveTime=t}}),$("#end_date").ECalendar({type:"time",stamp:!1,offset:[0,2],skin:2,step:10,callback:function(t,n){e.endLeaveTime=t}})},300)},applyLeave:function(){this.leaveApplyFlag=!0,this.setParentIframe(),this.initTime()},submitLeave:function(){var e=this;if(""==this.reason)return layer.msg("请假理由不能为空!"),!1;this.$http.post(SERVERROOTDATA+"api/student/site/Student.ashx?action=saveStudentLeave",{beginTime:e.beginLeaveTime,endTime:e.endLeaveTime,leaveReasons:e.reason},{emulateJSON:!0}).then(function(t){200==t.body.code?(layer.msg(t.body.message),e.reason="",e.currentLeave=1,e.leaveApplyFlag=!1):layer.msg(t.body.message)}).then(function(){e.showLeave()})}}})},92:function(e,t){}});