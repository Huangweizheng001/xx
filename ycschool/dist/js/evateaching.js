!function(e){var t={};function a(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=11)}({11:function(e,t,a){"use strict";function n(e){return/\S+/.test(e)}a(90),a(132);var s;function r(e,t,a){this.questionid=e,this.source=t,this.answer=a}s=$(window).storager({key:"ycToken"}).readStorage(),new Vue({el:"#jevateachingApp",data:{subjectArr:[],questionList:[]},filters:{addRootFile:function(e){return SERVERROOTFILE+e},getStyle:function(e){switch(e){case 1:return"single-choice";case 2:return"multiple-choice";case 3:return"judge";case 4:return"question-answer";case 5:return"completion"}},tostring:function(e){switch(e){case 1:return"A";case 2:return"B";case 3:return"C";case 4:return"D"}},toChinese:function(e){switch(e){case 1:return"一";case 2:return"二";case 3:return"三";case 4:return"四";case 5:return"五";case 6:return"六";case 7:return"七"}}},mounted:function(){this.$nextTick(function(){this.getSubject(),this.getQuestionList(),this.bindChoice()})},methods:{getSubject:function(){var e=this;this.$http.post(SERVERROOTDATA+"api/student/site/Student.ashx?action=getMyTeacher",{},{emulateJSON:!0}).then(function(t){200==t.body.code&&(e.subjectArr=t.body.rows)})},getQuestionList:function(){var e=this,t=layer.load(1,{shade:[.1,"#fff"]});this.$http.post(SERVERROOTDATA+"api/student/site/Survey.ashx?action=GetSurvey",{surveyId:3},{emulateJSON:!0}).then(function(a){layer.close(t),200==a.body.code&&(e.questionList=a.body.rows.typeQuestions,e.taskName=a.body.rows.paperTitle)}).then(function(){var e=$(".feanswer-card").height();$(".fetaskTemplate").css("marginBottom",e);var t=$(".fetaskTemplate").width();$(".feanswer-card").css("width",t),setTimeout(function(){$(window.parent.document).find("#jStudentIframe").css("height",$(".evateachingWrap").height()+20+"px")},300)}).then(function(){$(".fetaskTemplate").on("click","img",function(){showPhoto($(this))})})},bindChoice:function(){$(".fetaskTemplate").on("click",".single-choice .febox .fe-items .i-select",function(){$(this).siblings().removeClass("active"),$(this).addClass("active");var e=$(this).find("b").html();$(this).parent().parent().find("input.studentAnswer").val(e);var t=$(this).parent().parent().data("id"),a=$(this).parent().parent().data("source");n(e)?$(".w"+t+"-"+a).addClass("active"):$(".w"+t+"-"+a).removeClass("active")}),$(".fetaskTemplate").on("click",".multiple-choice .febox .fe-items .i-select",function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active");for(var e=$(this).parent().find(".active"),t="",a=0;a<e.length;a++)t+=$(e[a]).find("b").html(),a<e.length-1&&(t+="、");$(this).parent().parent().find("input.studentAnswer").val(t);var s=$(this).parent().parent().data("id"),r=$(this).parent().parent().data("source");n(t)?$(".w"+s+"-"+r).addClass("active"):$(".w"+s+"-"+r).removeClass("active")}),$(".fetaskTemplate").on("click",".judge .febox .fe-items .i-select",function(){$(this).siblings().removeClass("active"),$(this).addClass("active");var e=$(this).find("b").html();$(this).parent().parent().find("input.studentAnswer").val(e);var t=$(this).parent().parent().data("id"),a=$(this).parent().parent().data("source");n(e)?$(".w"+t+"-"+a).addClass("active"):$(".w"+t+"-"+a).removeClass("active")}),$(".fetaskTemplate").on("keyup",".question-answer .febox .fe-items textarea",function(){var e=$(this).val();$(this).parent().parent().parent().find("input.studentAnswer").val(e);var t=$(this).parent().parent().parent().data("id"),a=$(this).parent().parent().parent().data("source");n(e)?$(".w"+t+"-"+a).addClass("active"):$(".w"+t+"-"+a).removeClass("active")}),$(".fetaskTemplate").on("keyup",".completion .febox .fe-stems input",function(){for(var e=$(this).parent().parent().find("input"),t="",a=0,s=0;s<e.length;s++)t+=$(e[s]).val(),s<e.length-1&&(t+="_"),n($(e[s]).val())||a++;$(this).parent().parent().parent().find("input.studentAnswer").val(t);var r=$(this).parent().parent().parent().data("id"),i=$(this).parent().parent().parent().data("source");a>0?$(".w"+r+"-"+i).removeClass("active"):$(".w"+r+"-"+i).addClass("active")}),$(".feanswer-card").on("click","span",function(){var e=$(this).data("id"),t=$(this).data("source"),a=$(".q"+e+"-"+t).offset().top-200;parent.window.rolling(a)}),$(".feanswer-card").on("click",".feoperation button",function(){for(var e=$(".feanswer-card span"),t=!0,a=0;a<e.length;a++)if(!$(e[a]).hasClass("active")){t=!1;break}if(t){var n=$(".febox .studentAnswer"),i=[];for(a=0;a<n.length;a++){var o=$(n[a]).val(),c=$(n[a]).parent().data("id"),u=$(n[a]).parent().data("source");i.push(new r(c,u,o))}i=JSON.stringify(i),parent.layer.confirm("确定提交？",{btn:["提交","取消"]},function(){var e=layer.load(1,{shade:[.1,"#fff"]});$.ajax({url:SERVERROOTDATA+"api/student/site/Survey.ashx?action=SubmitSurvey",type:"POST",data:{ycToken:s,surveyId:3,questions:i},success:function(t){var a=JSON.parse(t);200==a.code?(parent.layer.closeAll(),layer.close(e),layer.msg(a.message)):(layer.close(e),layer.msg(a.message))}})},function(){})}else{for(n=$(".febox .studentAnswer"),i=[],a=0;a<n.length;a++)o=$(n[a]).val(),c=$(n[a]).parent().data("id"),u=$(n[a]).parent().data("source"),i.push(new r(c,u,o));i=JSON.stringify(i),parent.layer.confirm("你还有题未答！",{btn:["继续答题","提交"]},function(){parent.layer.closeAll()},function(){var e=layer.load(1,{shade:[.1,"#fff"]});$.ajax({url:SERVERROOTDATA+"api/student/site/Survey.ashx?action=SubmitSurvey",type:"POST",data:{ycToken:s,surveyId:3,questions:i},success:function(t){var a=JSON.parse(t);200==a.code?(parent.layer.closeAll(),layer.close(e),layer.msg(a.message)):(layer.close(e),layer.msg(a.message))}})})}}),$(parent.window).scroll(function(){$(parent.window).scrollTop()>=$(".fetaskTemplate").height()-$(parent.window).height()||$(parent.window).scrollTop()>=$(parent.window).height()?$(".feanswer-card").fadeIn(300):$(".feanswer-card").fadeOut(300)})}}})},132:function(e,t){},90:function(e,t){}});