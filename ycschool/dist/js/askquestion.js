!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=64)}({140:function(e,t){},64:function(e,t,n){"use strict";n(140);var o=$(window).storager({key:"ycToken"}).readStorage();new Vue({el:"#knowledgeAskQuestion",data:{limitsize:400,point:0,currentPoint:0,gradeArr:[],subjectArr:[],gradeId:"",subjectId:""},filters:{addRootFile:function(e){return SERVERROOTFILE+e}},mounted:function(){var e=this;this.$nextTick(function(){e.init(),e.getGrade(),e.getSubject()})},methods:{init:function(){var e=this;$("#zwb_upload").bindUpload({url:"http://zz.fetv.cn/YcE/ashx/upload/UploadFile.ashx?action=formDataUploadNew",callbackPath:"",num:8,type:"jpg|png|gif|svg",size:3}),this.$http.post(SERVERROOTDATA+"api/knowledge/site/KnowledgePay.ashx?action=getUserKPInfo",{ycToken:o},{emulateJSON:!0}).then(function(t){200==t.body.code&&t.body.rows.length>0&&(e.currentPoint=t.body.rows[0].myPoint)})},getGrade:function(){var e=this;this.$http.post(SERVERROOTDATA+"website/ashx/site/Subject.ashx?action=getGrade",{pageIndex:1,pageSize:999},{emulateJSON:!0}).then(function(t){200==t.body.code&&t.body.rows.length>0&&(e.gradeArr=t.body.rows)})},getSubject:function(){var e=this;this.$http.post(SERVERROOTDATA+"website/ashx/site/Subject.ashx?action=getSubject",{pageIndex:1,pageSize:999},{emulateJSON:!0}).then(function(t){200==t.body.code&&t.body.rows.length>0&&(e.subjectArr=t.body.rows)})},putQuestion:function(){var e;if(null!=o&&void 0!=o&&"undefined"!=o)if(e=$(".textarea").html(),/\S+/.test(e))if(this.point<0)layer.msg("积分不能为负数");else if(parseInt(this.point)>parseInt(this.currentPoint))layer.msg("目前你的积分不够");else{var t=layer.load(1,{shade:[.1,"#fff"]});this.$http.post(SERVERROOTDATA+"api/knowledge/site/knowledgePay.ashx?action=saveKPQuestion",{qType:0,content:$(".textarea").html(),iconPath:photoArray,ycToken:o,point:this.point,state:0,saveTag:"add",subjectId:this.subjectId,gradeId:this.gradeId},{emulateJSON:!0}).then(function(e){layer.close(t),200==e.body.code?(layer.msg("提交成功"),setTimeout(function(){},1e3)):layer.msg("提交失败")})}else layer.msg("问题描述不能为空");else layer.msg("请先登录")},limitSize:function(){this.limitsize=400-$(".textarea").html().length}}})}});