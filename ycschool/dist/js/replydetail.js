!function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=62)}({140:function(e,t){},62:function(e,t,o){"use strict";o(140);var n=$(void 0).getUrlParam("questionId"),i=$(window).storager({key:"uId"}).readStorage(),s=$(window).storager({key:"uType"}).readStorage(),a=$(window).storager({key:"ycToken"}).readStorage();new Vue({el:"#knowledgereplydetail",data:{login:!1,qUid:"",qUtype:"",qType:"",nickName:"",mypoint:0,myQnum:0,myAnum:0,headIcon:"",questionCon:"",current:1,totalCount:0,replylist:[],loadmore:!1,questionDetail:""},filters:{addImgile:function(e){return SERVERROOTFILE+"uploads/images/"+e},addRootFile:function(e){return SERVERROOTFILE+e},showTime:function(e){var t=e.replace(/-/g,"/"),o=(new Date).getTime()-new Date(t).getTime(),n=Math.floor(o/864e5),i=o%864e5,s=Math.floor(i/36e5),a=i%36e5,r=Math.floor(a/6e4),l=a%6e4,u=Math.round(l/1e3);return n>0?n+"天前":s>0?s+"小时前":r>0?r+"分钟前":u>0?"刚刚":void 0}},computed:{hasBest:function(){for(var e=0;e<this.replylist.length;e++)if(1==this.replylist[e].isBest||"1"==this.replylist[e].isBest)return!0;return!1},chargeMode:function(){return this.qType},isResult:function(){return i==this.qUid&&s==this.qUtype?1:0}},mounted:function(){var e=this;this.$nextTick(function(){e.init()})},methods:{init:function(){var e=this;$("#zwb_upload").bindUpload({url:"http://zz.fetv.cn/YcE/ashx/upload/UploadFile.ashx?action=formDataUploadNew",callbackPath:"",num:8,type:"jpg|png|gif|svg",size:3}),e.headIcon=$(window).storager({key:"uIcon"}).readStorage(),null==a||void 0==a||"undefined"==a?this.login=!1:(this.login=!0,this.nickName=$(window).storager({key:"uName"}).readStorage(),this.$http.post(SERVERROOTDATA+"api/knowledge/site/KnowledgePay.ashx?action=getUserKPInfo",{ycToken:a},{emulateJSON:!0}).then(function(t){200==t.body.code&&t.body.rows.length>0&&(e.mypoint=t.body.rows[0].myPoint,e.myQnum=t.body.rows[0].myQuestionNum,e.myAnum=t.body.rows[0].myResponseNum)})),this.getQuestionDetail(),this.getReplylist(this.current)},getQuestionDetail:function(){var e=this;this.$http.post(SERVERROOTDATA+"website/ashx/site/knowledgePay.ashx?action=getKPQuestionById",{KPQuestionId:n},{emulateJSON:!0}).then(function(t){200==t.body.code&&t.body.rows.length>0&&(e.questionCon=t.body.rows[0],e.questionDetail=t.body.rows[0].content,e.questionDetail=e.questionDetail.replace(/u003c/g,"<"),e.questionDetail=e.questionDetail.replace(/u003e/g,">"),e.qType=t.body.rows[0].qType,e.qUid=t.body.rows[0].userId,e.qUtype=t.body.rows[0].userKind)}).then(function(){$(".feaskquestion-left").on("click",".fepictureArr img",function(){showPhoto($(this))})})},getReplylist:function(e){var t=this;this.$http.post(SERVERROOTDATA+"website/ashx/site/knowledgePay.ashx?action=getKPResponseById",{KPQuestionId:n,pageIndex:e,pageSize:5},{emulateJSON:!0}).then(function(o){200==o.body.code&&(t.replylist=t.replylist.concat(o.body.rows),t.totalCount=o.body.totalCount,e<o.body.totalPageCount?t.loadmore=!0:t.loadmore=!1)}).then(function(){$(".felastanswer").on("click",".fepictureArr img",function(){showPhoto($(this))})})},setGood:function(e){var t=this;layer.confirm("你确定要采纳这个答案吗？",{btn:["确定","取消"]},function(){$.ajax({url:SERVERROOTDATA+"api/knowledge/site/knowledgePay.ashx?action=saveKPResponse",type:"POST",data:{KPResponseId:e,isBest:1,saveTag:"update",ycToken:a},success:function(e){200==JSON.parse(e).code?(layer.msg("采纳成功！",{icon:1}),setTimeout(function(){t.replylist=[],t.current=1,t.getReplylist(t.current)},1e3)):(layer.msg("采纳失败",{icon:1}),setTimeout(function(){layer.closeAll()},1e3))}})},function(){})},loadMore:function(){this.getReplylist(++this.current)},putQuestion:function(e){if(null!=a&&void 0!=a&&"undefined"!=a)if(1!=e||3==s)if(t=$(".textarea").html(),/\S+/.test(t)){var t,o=layer.load(1,{shade:[.1,"#fff"]});this.$http.post(SERVERROOTDATA+"api/knowledge/site/knowledgePay.ashx?action=saveKPResponse",{KPQuestionId:n,content:$(".textarea").html(),filePath:photoArray,ycToken:a,isBest:0,saveTag:"add"},{emulateJSON:!0}).then(function(e){layer.close(o),200==e.body.code?(layer.msg("提交成功"),setTimeout(function(){location.reload()},1e3)):layer.msg("提交失败")})}else layer.msg("问题回复不能为空");else layer.msg("只有老师才能回答");else layer.msg("请先登录")},gotoMyquestion:function(){3==s||(window.location.href=ROOT+"studentcenter.html#answer")},gotoMyreply:function(){window.location.href=3==s?ROOT+"teachercenter.html#answer":ROOT+"studentcenter.html?type=1#answer"}}})}});