!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=33)}({132:function(e,t){},33:function(e,t,r){"use strict";function n(e){return/\S+/.test(e)}r(132),$(window.parent.document).find("#jTeacherIframe").css("height",$(".creatediscuss").height()+300+"px"),new Vue({el:"#creatediscuss",data:{typeArr:[],addressArr:[],gradeArr:[],subjectArr:[],menberArr:[],title:"",content:"",modeId:"",gradeId:"",subjectId:"",boardroomApplyId:""},filters:{addRootFile:function(e){return SERVERROOTFILE+e}},mounted:function(){var e=this;this.$nextTick(function(){e.init(),e.initSelect()})},methods:{init:function(){ECalendarisOpen1($("#time"));var e=this;e.$http.post(SERVERROOTDATA+"api/teacher/site/research.ashx?action=modeList",{},{emulateJSON:!0}).then(function(t){200==t.body.code&&(e.typeArr=t.body.rows,t.body.rows.length>0&&(e.modeId=t.body.rows[0].mode))}),e.$http.post(SERVERROOTDATA+"api/teacher/site/research.ashx?action=boardroomApplyList",{},{emulateJSON:!0}).then(function(t){200==t.body.code&&(e.addressArr=t.body.rows)}).then(function(){$("#address").on("click",function(){e.addressArr.length<1&&parent.layer.open({type:1,area:["320px","220px"],content:'<div class="applyTip"><p>暂未申请会议室，请点击申请按钮，前往申请会议室</p><a onclick="goToapply()">前去申请</a></div>'})})})},initSelect:function(){var e=this;Promise.all([new Promise(function(t,r){e.$http.post(SERVERROOTDATA+"api/teacher/site/course.ashx?action=gradeList",{},{emulateJSON:!0}).then(function(r){200==r.body.code&&(e.gradeArr=r.body.rows,r.body.rows.length>0&&(e.gradeId=r.body.rows[0].gradeId)),t()}).then(function(){$("#grade").on("change",function(){e.gradeId=$(this).val(),e.getMenber(e.gradeId,e.subjectId)})})}),new Promise(function(t,r){e.$http.post(SERVERROOTDATA+"api/teacher/site/course.ashx?action=subjectList",{},{emulateJSON:!0}).then(function(r){200==r.body.code&&(e.subjectArr=r.body.rows,r.body.rows.length>0&&(e.subjectId=r.body.rows[0].subjectId)),t()}).then(function(){$("#subject").on("change",function(){e.subjectId=$(this).val(),e.getMenber(e.gradeId,e.subjectId)})})})]).then(function(){e.$http.post(SERVERROOTDATA+"api/teacher/site/research.ashx?action=showTeacherList",{gradeId:e.gradeId,subjectId:e.subjectId},{emulateJSON:!0}).then(function(t){200==t.body.code&&(e.menberArr=t.body.rows)}).then(function(){$("#teacher").on("click",function(){$(this).hasClass("active")?($(this).find("ul").slideUp(300),$(this).removeClass("active")):($(this).find("ul").slideDown(300),$(this).addClass("active"))}),$("#teacher ul").on("click","li",function(){var e=$(this).val(),t=$(this).html(),r=$('<span data-id="'+e+'">'+t+"<b>×</b></span>");r.on("click","b",function(){$(this).parent().remove()}),$(".menberList").append(r)})})})},getMenber:function(e,t){var r=this;r.$http.post(SERVERROOTDATA+"api/teacher/site/research.ashx?action=showTeacherList",{gradeId:e,subjectId:t},{emulateJSON:!0}).then(function(e){200==e.body.code&&(r.menberArr=e.body.rows)})},saveFirstStep:function(){if(n(this.title))if(n($("#time").val()))if(n(this.boardroomApplyId))if(n(this.content)){var e=$(".menberList span");if(e.length<1)layer.msg("请填加成员");else{for(var t="",r=0;r<e.length;r++){var o=e[r].dataset.id;r==e.length-1?t+=o:t+=o+","}var s=layer.load(1,{shade:[.1,"#fff"]});this.$http.post(SERVERROOTDATA+"api/teacher/site/research.ashx?action=saveResearch",{boardroomApplyId:this.boardroomApplyId,members:t,mode:this.modeId,researchContent:this.content,researchId:0,researchTime:$("#time").val(),researchTitle:this.title,tag:"add"},{emulateJSON:!0}).then(function(e){200==e.body.code?(layer.msg("提交成功"),setTimeout(function(){window.location.href="teachercenteractivity.html"},1e3)):(layer.close(s),layer.msg("提交失败"))})}}else layer.msg("请填写内容");else layer.msg("请选择地点");else layer.msg("请填写时间");else layer.msg("请填写主题")}}})}});