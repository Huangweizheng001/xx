!function(e){var t={};function a(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=32)}({132:function(e,t){},32:function(e,t,a){"use strict";function i(e){return/\S+/.test(e)}a(132),$(window.parent.document).find("#jTeacherIframe").css("height",$(".uploadAchievement").height()+"px"),new Vue({el:"#uploadAchievement",data:{title:"",iconPath:"",filePath:"",intro:"",desc:""},filters:{addRootFile:function(e){return SERVERROOTFILE+e}},mounted:function(){this.$nextTick(function(){})},methods:{addCover:function(e){var t=this;if($(e.target).val().match(/.jpg|.gif|.png|.bmp/i)){var a=new FormData($("#addImg")[0]);$.ajax({url:SERVERROOTDATA+"ashx/upload/UploadFile.ashx?action=formDataUploadNew",type:"POST",data:a,processData:!1,contentType:!1,success:function(a){var i=JSON.parse(a);if(200==i.code){var r=$(e.target).prev();upload(e.target,r),t.iconPath=i.iconPath}else layer.msg("上传失败")}})}else layer.msg("对不起，系统仅支持标准格式的照片，请您调整格式后重新上传，谢谢 !")},addDocument:function(e){var t=this;if($(e.target).val().match(/.pdf|.doc|.xls/i)){var a=new FormData($("#addFile")[0]),i=$(window).storager({key:"ycToken"}).readStorage();a.append("ycToken",i),$.ajax({url:SERVERROOTDATA+"api/teacher/site/research.ashx?action=formDataUpload",type:"POST",data:a,processData:!1,contentType:!1,success:function(e){var a=JSON.parse(e);200==a.code?(t.filePath=a.filePath,t.fileName=a.fileName):layer.msg("上传失败")}})}else layer.msg("对不起，系统仅支持标准格式的文件，请您调整格式后重新上传，谢谢 !")},saveFirstStep:function(){if(this.desc=$("#content").html(),i(this.title))if(i(this.filePath)||i(this.desc))if(i(this.iconPath))if(i(this.intro)){var e=layer.load(1,{shade:[.1,"#fff"]});this.$http.post(SERVERROOTDATA+"api/teacher/site/research.ashx?action=saveResearchResult",{fileName:this.fileName,coverUrl:this.iconPath,downloadUrl:this.filePath,intro:this.intro,resultContent:this.desc,resultId:0,tag:"add",title:this.title},{emulateJSON:!0}).then(function(t){200==t.body.code?(layer.msg("上传成功"),setTimeout(function(){window.location.href="teachercenteractivity.html"},1e3)):(layer.close(e),layer.msg("保存失败"))})}else layer.msg("请填写简介");else layer.msg("请上传封面");else layer.msg("请上传文件或请填写内容");else layer.msg("请填写主题")}}})}});