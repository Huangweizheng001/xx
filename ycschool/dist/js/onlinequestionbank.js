!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},s.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=67)}({140:function(t,e){},144:function(t,e){},67:function(t,e,s){"use strict";function i(t){return/\S+/.test(t)}s(144),s(140),new Vue({el:"#onlinequestionbank",data:{gradeArr:[],termArr:[],subjectArr:[],outlineArr:[],gradeId:"",termId:"",subjectId:"",syllabusId:"",syllabusName:"",nodata:!1,questionList:[],current:1,noQuestion:!1,showItem:4,allpage:0},filters:{addRootFile:function(t){return SERVERROOTFILE+t},getStyle:function(t){switch(t){case 1:return"single-choice";case 2:return"multiple-choice";case 3:return"judge";case 4:return"question-answer";case 5:return"completion"}}},computed:{pages:function(){var t=[];if(this.current<this.showItem)for(var e=Math.min(this.showItem,this.allpage);e;)t.unshift(e--);else{var s=this.current-Math.floor(this.showItem/2);e=this.showItem;for(s>this.allpage-this.showItem&&(s=this.allpage-this.showItem+1);e--;)t.push(s++)}return t}},mounted:function(){var t=this;this.$nextTick(function(){t.bindChoice(),t.initOutLine(),t.bindOutlineClick(),t.lookAnswer()})},methods:{getQuestionList:function(t,e,s,i,n){var a=this,r=layer.load(1,{shade:[.1,"#fff"]});this.$http.post(SERVERROOTDATA+"api/student/site/Paper.ashx?action=GetQuestionList",{pageIndex:n,pageSize:10,termId:t,gradeId:e,subjectId:s,syllabusId:i},{emulateJSON:!0}).then(function(t){layer.close(r),200==t.body.code&&(t.body.rows.length<1?a.noQuestion=!0:a.noQuestion=!1,a.questionList=t.body.rows,a.allpage=t.body.totalPageCount)}).then(function(){$(".fetaskTemplate").on("click","img",function(){showPhoto($(this))})})},bindChoice:function(){$(".fetaskTemplate").on("click",".febox.single-choice .fe-items .i-select",function(){$(this).siblings().removeClass("active"),$(this).addClass("active");var t=$(this).find("b").html();$(this).parent().parent().find("input.studentAnswer").val(t);var e=$(this).parent().parent().data("id"),s=$(this).parent().parent().data("source");i(t)?$(".w"+e+"-"+s).addClass("active"):$(".w"+e+"-"+s).removeClass("active")}),$(".fetaskTemplate").on("click",".febox.multiple-choice .fe-items .i-select",function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active");for(var t=$(this).parent().find(".active"),e="",s=0;s<t.length;s++)e+=$(t[s]).find("b").html(),s<t.length-1&&(e+="、");$(this).parent().parent().find("input.studentAnswer").val(e);var n=$(this).parent().parent().data("id"),a=$(this).parent().parent().data("source");i(e)?$(".w"+n+"-"+a).addClass("active"):$(".w"+n+"-"+a).removeClass("active")}),$(".fetaskTemplate").on("click",".febox.judge .fe-items .i-select",function(){$(this).siblings().removeClass("active"),$(this).addClass("active");var t=$(this).find("b").html();$(this).parent().parent().find("input.studentAnswer").val(t);var e=$(this).parent().parent().data("id"),s=$(this).parent().parent().data("source");i(t)?$(".w"+e+"-"+s).addClass("active"):$(".w"+e+"-"+s).removeClass("active")}),$(".fetaskTemplate").on("keyup",".febox.question-answer .fe-items textarea",function(){var t=$(this).val();$(this).parent().parent().parent().find("input.studentAnswer").val(t);var e=$(this).parent().parent().parent().data("id"),s=$(this).parent().parent().parent().data("source");i(t)?$(".w"+e+"-"+s).addClass("active"):$(".w"+e+"-"+s).removeClass("active")}),$(".fetaskTemplate").on("keyup",".febox.completion .fe-stems input",function(){for(var t=$(this).parent().parent().find("input"),e="",s=0,n=0;n<t.length;n++)e+=$(t[n]).val(),n<t.length-1&&(e+="_"),i($(t[n]).val())||s++;$(this).parent().parent().parent().find("input.studentAnswer").val(e);var a=$(this).parent().parent().parent().data("id"),r=$(this).parent().parent().parent().data("source");s>0?$(".w"+a+"-"+r).removeClass("active"):$(".w"+a+"-"+r).addClass("active")})},initOutLine:function(){var t=this;Promise.all([new Promise(function(e,s){t.$http.post(SERVERROOTDATA+"api/student/site/Paper.ashx?action=GetGradeList",{},{emulateJSON:!0}).then(function(s){200==s.body.code&&(t.gradeArr=s.body.rows,s.body.rows.length>0&&(t.gradeId=s.body.rows[0].gradeId)),e()}).then(function(){$("#grade a:nth-child(2)").addClass("active")})}),new Promise(function(e,s){t.$http.post(SERVERROOTDATA+"api/student/site/Paper.ashx?action=GetSubjectList",{},{emulateJSON:!0}).then(function(s){200==s.body.code&&(t.subjectArr=s.body.rows,s.body.rows.length>0&&(t.subjectId=s.body.rows[0].subjectId)),e()}).then(function(){$("#subject a:nth-child(2)").addClass("active")})}),new Promise(function(e,s){t.$http.post(SERVERROOTDATA+"api/student/site/Paper.ashx?action=GetTermList",{},{emulateJSON:!0}).then(function(s){200==s.body.code&&(t.termArr=s.body.rows,s.body.rows.length>0&&(t.termId=s.body.rows[0].id)),e()}).then(function(){$("#term a:nth-child(2)").addClass("active")})})]).then(function(){t.$http.post(SERVERROOTDATA+"api/student/site/Paper.ashx?action=GetSyllabusList",{gradeId:t.gradeId,subjectId:t.subjectId,termId:t.termId},{emulateJSON:!0}).then(function(e){200==e.body.code&&(t.outlineArr=e.body.rows,e.body.rows.length<1?t.nodata=!0:t.nodata=!1)}).then(function(){t.getQuestionList(t.termId,t.gradeId,t.subjectId,"",t.current)})})},getOutline:function(t,e,s){var i=this;i.$http.post(SERVERROOTDATA+"api/student/site/Paper.ashx?action=GetSyllabusList",{gradeId:e,subjectId:s,termId:t},{emulateJSON:!0}).then(function(t){200==t.body.code&&(i.outlineArr=t.body.rows,t.body.rows.length<1?i.nodata=!0:i.nodata=!1)}).then(function(){i.syllabusId="",i.current=1,i.getQuestionList(t,e,s,i.syllabusId,i.current)})},clickBySubject:function(t,e){this.subjectId=t,$(e.target).siblings().removeClass("active"),$(e.target).addClass("active"),this.getOutline(this.termId,this.gradeId,this.subjectId)},clickByGrade:function(t,e){this.gradeId=t,this.syllabusId="",this.current=1,$(e.target).siblings().removeClass("active"),$(e.target).addClass("active"),this.getOutline(this.termId,this.gradeId,this.subjectId)},clickByTerm:function(t,e){this.termId=t,this.syllabusId="",this.current=1,$(e.target).siblings().removeClass("active"),$(e.target).addClass("active"),this.getOutline(this.termId,this.gradeId,this.subjectId)},bindOutlineClick:function(){var t=this;$(".catalog").on("click",".first>h4",function(){$(this).next("ul").children().length<1||($(this).prev("i").hasClass("turn-down")?($(this).prev("i").removeClass(),$(this).prev("i").addClass("turn-right"),$(this).next("ul").slideUp()):($(this).prev("i").removeClass(),$(this).prev("i").addClass("turn-down"),$(this).next("ul").slideDown(),$(this).parent().siblings().find("i").removeClass(),$(this).parent().siblings().find("i").addClass("turn-right"),$(this).parent().siblings().find("ul").slideUp())),t.current=1,t.syllabusId=$(this).data("id"),t.getQuestionList(t.termId,t.gradeId,t.subjectId,t.syllabusId,t.current)}),$(".catalog").on("click",".second>li>h4",function(){$(this).next("ul").children().length<1||($(this).prev("i").hasClass("turn-down")?($(this).prev("i").removeClass(),$(this).prev("i").addClass("turn-right"),$(this).next("ul").slideUp()):($(this).prev("i").removeClass(),$(this).prev("i").addClass("turn-down"),$(this).next("ul").slideDown())),t.current=1,t.syllabusId=$(this).data("id"),t.getQuestionList(t.termId,t.gradeId,t.subjectId,t.syllabusId,t.current)}),$(".catalog").on("click",".three h4",function(){t.current=1,t.syllabusId=$(this).data("id"),t.getQuestionList(t.termId,t.gradeId,t.subjectId,t.syllabusId,t.current)})},goto:function(t){if(t!=this.current){if(t>this.allpage)return this.current=this.current-2,layer.msg("Sorry ╮(╯_╰)╭ 没有下一页喽！"),!1;this.current=t,this.getQuestionList(this.termId,this.gradeId,this.subjectId,this.syllabusId,this.current)}},lookAnswer:function(){$(".fetaskTemplate").on("click",".feanswer a",function(){$(this).hasClass("active")?($(this).parent().parent().find(".ferightanswer").hide(300),$(this).removeClass("active")):($(this).parent().parent().find(".ferightanswer").show(300),$(this).addClass("active"))})}}})}});