!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=50)}({132:function(e,t){},50:function(e,t,i){"use strict";function n(e,t,i){this.Id=e,this.name=t,this.score=i}function s(e,t){for(var i=-1,n=0;n<e.length;n++)e[n].Id==t&&(i=n);return i>-1&&e.splice(i,1),e}function o(e,t){for(var i=!1,n=0;n<e.length;n++)e[n].Id==t&&(i=!0);return i}i(132),function(){var e=$(this).getUrlParam("paperName"),t=$(this).getUrlParam("classId"),i=$(this).getUrlParam("syllabusId"),a=$(this).getUrlParam("endTime");new Vue({el:"#selectQuestion",data:{SearchName:"",Diffculty:"",QuestionType:"",courseId:"",current:1,questionType:[],rightAlready:[],questionList:[],courseList:[],nodata:!1},filters:{addRootFile:function(e){return SERVERROOTFILE+e}},mounted:function(){var e=this;this.$nextTick(function(){e.init(),e.getQuestionType(),e.getCourseList(),e.selectQuestion(),e.deleteRightQuestion(),e.getQuestionList(e.SearchName,e.Diffculty,e.QuestionType,e.current)})},methods:{init:function(){var o=this;$(".fe-select-condition").on("click",".fe-checkall input",function(){for(var e=$(".fe-question-bank .fe-item"),t=0;t<e.length;t++)if(1==$(this).prop("checked"))if(1==$(e[t]).find("input").prop("checked"));else{$(e[t]).find("input").prop("checked",!0);var i=$(e[t]).find("input").data("id"),a=$(e[t]).find("input").data("score"),c=$(e[t]).find("h3").html();$(e[t]).find("span").addClass("active"),o.rightAlready.push(new n(i,c,a))}else $(e[t]).find("input").prop("checked",!1),i=$(e[t]).find("input").data("id"),$(e[t]).find("span").removeClass("active"),s(o.rightAlready,i)}),$(".fe-select-question-pop").on("click",".fe-difficulty button",function(){$(this).hasClass("active")?($(this).parent().find("ul").css("display","none"),$(this).removeClass("active")):($(this).addClass("active"),$(this).parent().find("ul").css("display","block"))}),$(".fe-select-question-pop .fe-difficulty").on("click","ul li",function(){var e=$(this).html();o.Diffculty=$(this).data("id"),$(this).parent().hide(),o.current=1,o.questionList=[],o.getQuestionList(o.SearchName,o.Diffculty,o.QuestionType,o.current),$(".fe-checkall input").prop("checked",""),$(".fe-already-difficulty").show(),$(".fe-already-difficulty a").html(e),$(".fe-difficulty button").hide()}),$(".fe-select-question-pop .fe-difficulty").on("click",".fe-already-difficulty b",function(){$(".fe-already-difficulty").hide(),$(".fe-difficulty button").show(),$(".fe-difficulty button").removeClass("active"),o.Diffculty="",o.current=1,o.questionList=[],o.getQuestionList(o.SearchName,o.Diffculty,o.QuestionType,o.current),$(".fe-checkall input").prop("checked","")}),$(".fe-select-question-pop").on("click",".fe-type button",function(){$(this).hasClass("active")?($(this).parent().find("ul").css("display","none"),$(this).removeClass("active")):($(this).addClass("active"),$(this).parent().find("ul").css("display","block"))}),$(".fe-select-question-pop .fe-type").on("click","ul li",function(){var e=$(this).html();o.QuestionType=$(this).data("id"),$(this).parent().hide(),o.current=1,o.questionList=[],o.getQuestionList(o.SearchName,o.Diffculty,o.QuestionType,o.current),$(".fe-checkall input").prop("checked",""),$(".fe-already-type").show(),$(".fe-already-type a").html(e),$(".fe-type button").hide()}),$(".fe-select-question-pop .fe-type").on("click",".fe-already-type b",function(){$(".fe-already-type").hide(),$(".fe-type button").show(),$(".fe-type button").removeClass("active"),o.QuestionType="",o.current=1,o.questionList=[],o.getQuestionList(o.SearchName,o.Diffculty,o.QuestionType,o.current),$(".fe-checkall input").prop("checked","")}),$(".fe-select-question-pop").on("click",".fe-course button",function(){$(this).hasClass("active")?($(this).parent().find("ul").css("display","none"),$(this).removeClass("active")):($(this).addClass("active"),$(this).parent().find("ul").css("display","block"))}),$(".fe-select-question-pop .fe-course").on("click","ul li",function(){var e=$(this).html();o.courseId=$(this).data("id"),$(this).parent().hide(),$(".fe-already-course").show(),$(".fe-already-course a").html(e),$(".fe-course button").hide()}),$(".fe-select-question-pop .fe-course").on("click",".fe-already-course b",function(){$(".fe-already-course").hide(),$(".fe-course button").show(),$(".fe-course button").removeClass("active"),o.courseId=""}),$(".fe-select-question-left").on("keyup","p input",function(){var e=$(this).val();o.current=1,o.SearchName=e,o.questionList=[],o.getQuestionList(o.SearchName,o.Diffculty,o.QuestionType,o.current)}),$(".fe-select-question-right").on("click",".fe-select-question-right-top button",function(){o.rightAlready=[],o.setLeftgougou()}),$(".fe-select-question-pop").on("click",".feoperation button",function(){for(var n=layer.load(1,{shade:[.1,"#fff"]}),s="",c=0;c<o.rightAlready.length;c++)s+=o.rightAlready[c].Id+","+o.rightAlready[c].score,c!=o.rightAlready.length-1&&(s+="|");o.$http.post(SERVERROOTDATA+"api/teacher/site/homework.ashx?action=homeworkSaveNewForTeacher",{syllabusId:i,paperName:e,classId:t,courseId:o.courseId,endTime:a,saveTag:"add",quesitonList:s},{emulateJSON:!0}).then(function(e){layer.close(n),200==e.body.code?(parent.layer.closeAll(),parent.location.reload()):layer.msg("布置失败")})})},setLeftgougou:function(){for(var e=$(".fe-question-bank .fe-item"),t=0;t<e.length;t++){var i=$(e[t]).find("input").data("id");o(this.rightAlready,i)?($(e[t]).find("span").addClass("active"),$(e[t]).find("input").prop("checked",!0)):($(e[t]).find("span").removeClass("active"),$(e[t]).find("input").prop("checked",""))}$(".fe-question-bank .fe-item span.active").length<1&&$(".fe-checkall input").prop("checked","")},deleteRightQuestion:function(){var e=this;$(".fe-already-select-question").on("click",".fe-item i",function(t){var i=t.target.dataset.id;s(e.rightAlready,i),e.setLeftgougou()})},selectQuestion:function(){var e=this;$(".fe-question-bank").on("click",".fe-item",function(t){if(t.preventDefault(),1==$(this).find("input").prop("checked")){$(this).find("input").prop("checked",!1);var i=$(this).find("input").data("id");$(this).find("span").removeClass("active"),s(e.rightAlready,i)}else{$(this).find("input").prop("checked",!0),i=$(this).find("input").data("id");var o=$(this).find("input").data("score"),a=$(this).find("h3").html();$(this).find("span").addClass("active"),e.rightAlready.push(new n(i,a,o))}})},getQuestionType:function(){var e=this;this.$http.post(SERVERROOTDATA+"api/teacher/site/homework.ashx?action=getQuestionType",{},{emulateJSON:!0}).then(function(t){200==t.body.code&&(e.questionType=t.body.rows)})},getCourseList:function(){var e=this;this.$http.post(SERVERROOTDATA+"website/ashx/app/LearningWorld.ashx?action=getCourse",{courseTypeId:1,name:"",syllabusId:i},{emulateJSON:!0}).then(function(t){200==t.body.code&&(e.courseList=t.body.rows)})},lodingMore:function(){this.current++,this.getQuestionList(this.SearchName,this.Diffculty,this.QuestionType,this.current)},getQuestionList:function(e,t,n,s){var o=this;this.$http.post(SERVERROOTDATA+"api/teacher/site/homework.ashx?action=getQuestionList",{Qtype:n,diff:t,pageIndex:s,pageSize:11,syllabusId:i,questionName:e},{emulateJSON:!0}).then(function(e){200==e.body.code&&(e.body.rows.length<1?o.nodata=!0:o.nodata=!1,o.questionList=o.questionList.concat(e.body.rows))}).then(function(){o.setLeftgougou()})}}})}()}});